{"version":3,"file":"nz-form-builder.umd.js","sources":["ng://nz-form-builder/lib/form-builder.service.ts","ng://nz-form-builder/lib/form-builder.component.ts","ng://nz-form-builder/lib/form-builder.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormBuilderService {\n\n  constructor() { }\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\n// import { NgbDatepickerConfig, NgbCalendar, NgbDate, NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'nz-form-builder',\n  templateUrl: './form-builder.component.html',\n  styleUrls: ['./form-builder.component.scss']\n})\nexport class FormBuilderComponent implements OnInit {\n\n  @Input() fieldConfig: any;\n  @Input() formConfig: any;\n  @Input() journey: string;\n  @Input() dataToUpdate: any;\n\n  @Output() formValues: any = new EventEmitter()\n\n  checkboxArr = [];\n  filesSelected: any;\n  dynamicForm: FormGroup;\n\n  constructor(\n    private fb: FormBuilder,\n  ) { }\n\n  ngOnInit() {\n    this.createDynamicForm();\n  }\n\n  /**\n   * Create Form Group\n   */\n  createDynamicForm() {\n    this.dynamicForm = this.fb.group({}),\n      this.dynamicForm.valueChanges.subscribe((value) => {\n      })\n    this.initializeDynamicForm();\n    // dummy data to test\n    const valuesDyn = {\n      \"firstname\": \"nizam123\",\n      \"lastname\": \"shaik456\",\n      \"class\": \"8\",\n      \"age\": \"30\",\n      \"dateofbirth\": \"1994-12-05\",\n      \"gender\": \"female\",\n      \"state\": [\n        {\n          \"key\": \"Nellore\",\n          \"value\": \"nellore\",\n          \"isChecked\": true\n        }\n      ],\n      \"address\": \"buchi reddy palem\",\n      \"file\": {\n        \"0\": {}\n      }\n    }\n    if (this.journey === 'update' && this.dataToUpdate){\n      this.setFormFields(this.dataToUpdate);\n    }\n      \n  }\n\n  /**\n   * Initialize the form with all validations and patterns\n   */\n  initializeDynamicForm() {\n    this.fieldConfig.forEach((row) => {\n      if (row.required === true && row.pattern != '') {\n        this.dynamicForm.addControl(row.name, new FormControl({ value: '', disabled: row.disabled }, [Validators.required, Validators.pattern(row.pattern)]));\n      } else if (row.pattern != '') {\n        this.dynamicForm.addControl(row.name, new FormControl({ value: '', disabled: row.disabled }, [Validators.pattern(row.pattern)]));\n      } else if (row.required === true) {\n        this.dynamicForm.addControl(row.name, new FormControl({ value: '', disabled: row.disabled }, [Validators.required]));\n      } else {\n        this.dynamicForm.addControl(row.name, new FormControl({ value: '', disabled: row.disabled }));\n      }\n    });\n  }\n\n  /**\n   * For Validations , This marks all fields as touched on click of submit\n   */\n  private markFormGroupTouched(formGroup: FormGroup) {\n    (<any>Object).values(formGroup.controls).forEach(control => {\n      control.markAsTouched();\n      if (control.controls) {\n        this.markFormGroupTouched(control);\n      }\n    });\n  }\n\n  onCancel() {\n    // reset the form\n    Object.keys(this.dynamicForm.controls).forEach((name, i) => {\n      this.dynamicForm.controls[name].patchValue('');\n    })\n  }\n\n  /**\n   * Checkbox logic\n   */\n  toggleSelect(event, option, field, actualArr) {\n\n    const found = this.checkboxArr.some((el) => {\n      return el.key === option.key;\n    });\n    if (!found) {\n      this.checkboxArr.push({ key: option.key, value: option.value, isChecked: true });\n    } else {\n      const index = this.checkboxArr.map((row) => { return row.key; }).indexOf(option.key);\n      this.checkboxArr.splice(index, 1);\n    }\n    this.dynamicForm.controls[field.name].setValue(this.checkboxArr);\n  }\n\n  /**\n   * The below logic for edit Journey\n   * @param values => will be the form values to patch in form\n   */\n\n  setFormFields(values) {\n    this.checkboxArr = [];\n    Object.keys(values).forEach((name) => {\n      if (this.dynamicForm.get(name)) {\n        this.dynamicForm.controls[name].patchValue(values[name]);\n      }\n    })\n\n    // If checkbox exist in field Config , the below block activates and map the values to checkbox\n    this.fieldConfig.forEach(element => {\n      if (element.type === 'checkbox') {\n\n        const selectedOptions = this.dynamicForm.get(element.name).value;\n        const totalOptions: any = element.options;\n        this.checkboxArr = selectedOptions;\n\n        totalOptions.forEach((r) => { r.isChecked = false; })\n\n        for (let i = 0; i < selectedOptions.length; i++) {\n          const index = totalOptions.map((row) => { return row.value; }).indexOf(selectedOptions[i].value);\n          totalOptions[index].isChecked = true;\n        }\n      }\n    });\n  }\n\n  /**\n   * For Input type File\n   */\n  onFileSelected(event, field) {\n    this.filesSelected = event.target.files;\n    this.dynamicForm.controls[field.name].setValue(event.target.files);\n  }\n\n  /**\n   * On Submit form\n   */\n  onDSubmit(dynamicForm) {\n    this.markFormGroupTouched(this.dynamicForm);\n    this.formValues.emit(this.dynamicForm);\n  }\n\n  // Branding\n  mailTo() {\n    let url;\n    url = 'mailto:' + 'nizamuddin407@gmail.com';\n    url += '?subject=' + 'Dynamic form builder';\n    url += '&body=' + '';\n    window.open(url, '', '\"width=200,height=100\"');\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { FormBuilderComponent } from './form-builder.component';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [FormBuilderComponent],\n  imports: [\n    FormsModule,\n    ReactiveFormsModule,\n    CommonModule,\n  ],\n  exports: [FormBuilderComponent]\n})\nexport class FormBuilderModule { }\n"],"names":["Injectable","EventEmitter","FormControl","Validators","Component","FormBuilder","Input","Output","NgModule","FormsModule","ReactiveFormsModule","CommonModule"],"mappings":"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"}